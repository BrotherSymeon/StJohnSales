{{!< ../layout}}

<strong class="card-title" v-if="headerText">Orders</strong>
<hr />
<div id="app" class="col-lg-12">
  <order-component></order-component>
</div>
{{#contentFor "pageScripts"}}
 <script type="x-template" id="order-component">
   <div class="table-responsive">
      <table class="table table-bordered table-striped table-hover table-sm">
        <thead>
          <tr>
            <th scope="col">Sale Date</th>
            <th scope="col">Date Shipped</th>
            <th scope="col">Buyer</th>
            <th scope="col">Value</th>
            <th scope="col">Total</th>
            <th scope="col">Status</th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
          <tr v-for="item in items">
            <td> [[ new Date( item.SaleDate ).toLocaleDateString()]]</td>
            <td> [[ new Date( item.DateShipped ).toLocaleDateString()]]</td>
            <td> [[ item.FullName ]]</td>
            <td>[[ item.OrderValue ]] </td>
            <td>[[ item.OrderTotal ]] </td>
            <td>[[ item.Status ]] </td>
            <td> <button v-on:click="showModal(item.OrderId)" type="button" class="btn btn-success btn-sm"><i class="fa fa-edit"></i>&nbsp; View </button></td>
          </tr>
        </tbody>
      </table>
      <div class="pagination">
        <div class="number" v-on:click="firstPage()">First</div>
        <div class="number" v-on:click="prevPage()">Prev</div>
        <div class="number" v-on:click="nextPage()">Next</div>
        <div class="number" v-on:click="lastPage()">Last</div>
      <div> Page [[ currentPage ]] of [[ numberOfPages ]] </div>
      </div>
    </div>
 </script>
 <script src="https://unpkg.com/vue@2.1.10/dist/vue.js"></script>
 <script src="https://cdn.jsdelivr.net/npm/vue-good-table@2.18.1/dist/vue-good-table.min.js"></script>
 <script>
   Vue.component('order-component', {
     template: '#order-component',
     delimiters: ['[[', ']]'],
     data: function () {
       return {
         currentPage: 1,
         elementsPerPage: 10,
         numberOfPages: {{{toJSON data.pages }}},
         items: {{{toJSON data.items }}}
       };
     },
     methods: {
       firstPage: function () {
         this.currentPage = 1;
         console.log(`changing to page ${this.currentPage}`);
       },
       prevPage: function () {
          if(this.currentPage ===1){
            this.currentPage = 1
          }else if(this.currentPage === numberOfPages){

          }else {
            this.currentPage = this.currentPage - 1;
          }
         console.log(`changing to page ${this.currentPage}`);
       },

       nextPage: function () {
         console.log(`changing to ${i}`);
       },
       lastPage: function () {
         console.log(`changing to ${i}`);
       },
       showModal: function(orderId){
          alert(orderId);
       }
     }
   });
   var app = new Vue({
     el: '#app'
   });




 </script>
{{/contentFor}}

