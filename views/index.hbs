{{!< layout}} 

<h3>Dashboard</h3>
<div>
  <div class="">
    
  </div>
</div>
 <div class="card">
              <div class="card-header">
                <h4 class="card-title mb-0">
                  <i class="fas fa-chart-pie"></i>
                  Etsy Sales By Month
                </h4>
<div class="card-body">
  <div class="tab-content p-0">
    <!-- Morris chart - Sales -->
    <div class="chart tab-pane active" id="revenue-chart" style="position: relative; height: 300px;">
      <canvas id="revenue-chart-canvas" height="300" style="height: 300px;"></canvas>                         
    </div>
    <div class="chart tab-pane" id="sales-chart" style="position: relative; height: 300px;">
      <canvas id="sales-chart-canvas" height="300" style="height: 300px;"></canvas>                         
    </div>  
  </div>
</div><!-- /.card-body -->
   </div>
</div>



{{#contentFor "pageScripts"}}
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
  <script>
    var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec']
    var data = {{{toJSON data }}}
    var quarterData = {{{toJSON quarterData }}}
    var mylabels = data.map(function(item){
      return months[Number(item.MonthOfYear) - 1]
    });
    var myDataPoints = data.map(function(item){
      return item.Amount
    })
  window.addEventListener('load', function () {
    //your code right here;
    console.log('hello')
      /* Chart.js Charts */
  // Sales chart
  var salesChartCanvas = document.getElementById('revenue-chart-canvas').getContext('2d');
  //$('#revenue-chart').get(0).getContext('2d');

  var salesChartData = {
    labels  : mylabels,
    datasets: [
      {
        label               : 'Etsy Sales',
        backgroundColor     : 'rgba(60,141,188,0.9)',
        borderColor         : 'rgba(60,141,188,0.8)',
        pointRadius          : false,
        pointColor          : '#3b8bba',
        pointStrokeColor    : 'rgba(60,141,188,1)',
        pointHighlightFill  : '#fff',
        pointHighlightStroke: 'rgba(60,141,188,1)',
        data                : myDataPoints
      }
    ]
  }
   var salesChartOptions = {
    maintainAspectRatio : false,
    responsive : true,
    legend: {
      display: false
    },
    scales: {
      xAxes: [{
        gridLines : {
          display : false,
        }
      }],
      yAxes: [{
        gridLines : {
          display : false,
        }
      }]
    }
  }

  // This will get the first returned node in the jQuery collection.
  var salesChart = new Chart(salesChartCanvas, { 
      type: 'line', 
      data: salesChartData, 
      options: salesChartOptions
    }
  )
  
  }, false);
</script>
{{/contentFor}}